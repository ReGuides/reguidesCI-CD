#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./clear-cache.sh

echo "üßπ –û—á–∏—â–∞–µ–º –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞..."

# –û—á–∏—â–∞–µ–º –∫—ç—à Next.js
echo "üìÅ –û—á–∏—â–∞–µ–º –∫—ç—à Next.js..."
rm -rf /var/www/reguides/.next/cache
rm -rf /var/www/reguides/node_modules/.cache

# –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
echo "‚è∞ –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤..."
find /var/www/reguides/.next/static -name "*.js" -exec touch {} \;
find /var/www/reguides/.next/static -name "*.css" -exec touch {} \;

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º PM2 –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—ç—à–∞
echo "üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º PM2..."
pm2 restart reguides-nextjs

echo "‚úÖ –ö—ç—à –æ—á–∏—â–µ–Ω!"
echo "üí° –¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Ctrl+F5)"
